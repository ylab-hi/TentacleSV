# TentacleSV: Main Snakefile for SV calling and merging pipeline
from snakemake.utils import min_version

# Set minimum Snakemake version
min_version("6.0.0")

# Load configuration
configfile: "config/config.yaml"

# Import helper modules
include: "rules/common.smk"
include: "rules/mapping.smk"
include: "rules/sv_calling.smk"
include: "rules/merge.smk"

# Generate list of final output files
def get_final_outputs():
    final_outputs = []
    
    # Add merged VCF files for each sample
    final_outputs.extend(
        expand("results/merged/{sample}.vcf", sample=SAMPLES)
    )
    
    return final_outputs

# Default rule
rule all:
    input:
        get_final_outputs()
